<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Everywhere Futbol - Pro Arena</title>
    <style>
        :root { 
            --bg: #f0f2f5; --header-bg: #1e3a8a; --card: #ffffff; 
            --text: #1e3a8a; --accent: #d4af37; --whatsapp: #25d366;
            --border: #e2e8f0; --glass: rgba(255,255,255,0.95);
        }

        [data-theme="dark"] {
            --bg: #0b0f19; --header-bg: #161b28; --card: #1f2937; 
            --text: #f8fafc; --border: #374151; --glass: rgba(31,41,55,0.95);
        }

        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg); color: var(--text); transition: 0.3s; padding-bottom: 120px; overflow-x: hidden; }
        
        header { background: var(--header-bg); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 3px solid var(--accent); position: sticky; top: 0; z-index: 1000; color: white; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        
        .user-stats { position: relative; display: flex; flex-direction: column; align-items: flex-end; gap: 2px; cursor: pointer; background: rgba(255,255,255,0.1); padding: 5px 12px; border-radius: 15px; border: 1px solid var(--accent); transition: 0.3s; }
        .rank-name { font-size: 0.65rem; font-weight: 900; color: var(--accent); text-transform: uppercase; }
        .xp-bump { transform: scale(1.1); box-shadow: 0 0 15px var(--accent); }

        /* Level Modal */
        #levelModal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); width: 85%; max-width: 400px; background: var(--glass); border-radius: 25px; padding: 25px; z-index: 10001; color: var(--text); border: 2px solid var(--accent); transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 20px 50px rgba(0,0,0,0.5); backdrop-filter: blur(15px); }
        #levelModal.active { transform: translate(-50%, -50%) scale(1); }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: none; z-index: 10000; }

        .container { max-width: 500px; margin: auto; padding: 15px; }

        /* Everywhere Legend Special Effect */
        .legend-glow { animation: legendPulse 2s infinite; border: 2px solid gold !important; background: linear-gradient(45deg, rgba(212,175,55,0.3), transparent) !important; }
        @keyframes legendPulse { 0% { box-shadow: 0 0 5px gold; } 50% { box-shadow: 0 0 30px gold; } 100% { box-shadow: 0 0 5px gold; } }

        #goalAlert { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); background: var(--accent); color: #000; padding: 30px 60px; border-radius: 60px; font-size: 3rem; font-weight: 900; z-index: 9999; transition: 0.4s; border: 5px solid white; pointer-events: none; }

        .news-box { background: var(--card); border-left: 5px solid var(--accent); padding: 15px; border-radius: 12px; margin-bottom: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        
        .live-indicator { position: fixed; bottom: 85px; left: 15px; background: var(--header-bg); color: white; padding: 10px 18px; border-radius: 30px; display: flex; align-items: center; gap: 10px; font-size: 0.7rem; z-index: 999; border: 1px solid var(--accent); }
        .status-dot { width: 8px; height: 8px; background: #2ecc71; border-radius: 50%; box-shadow: 0 0 10px #2ecc71; animation: pulse 1.5s infinite; }

        .penalty-arena { background: linear-gradient(#2ecc71, #27ae60); border: 4px solid white; border-radius: 15px; position: relative; height: 160px; display: flex; align-items: flex-end; justify-content: center; overflow: hidden; }
        .keeper { position: absolute; top: 30px; font-size: 3.2rem; transition: 0.4s; z-index: 2; }
        .ball { font-size: 1.6rem; transition: 0.5s; z-index: 3; position: absolute; bottom: 10px; }
        
        .kick-btn { flex: 1; padding: 14px; border-radius: 12px; border: none; background: var(--header-bg); color: white; font-weight: 800; cursor: pointer; }

        .nav-bar { position: fixed; bottom: 12px; left: 50%; transform: translateX(-50%); width: 92%; max-width: 450px; background: var(--glass); display: flex; justify-content: space-around; padding: 16px; border-radius: 30px; box-shadow: 0 15px 35px rgba(0,0,0,0.4); z-index: 1000; }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.4; } 100% { opacity: 1; } }
    </style>
</head>
<body id="mainBody">

<div id="goalAlert">GOAAAL! ‚öΩ</div>
<div class="overlay" id="overlay" onclick="closeLevelModal()"></div>

<div id="levelModal">
    <h2 style="margin-top: 0; color: var(--accent); text-align: center;">üèÜ Futbol Karyerasƒ±</h2>
    <div id="rankList" style="font-size: 0.85rem; line-height: 2.2;">
        </div>
    <button onclick="closeLevelModal()" style="width: 100%; margin-top: 20px; padding: 12px; background: var(--header-bg); color: white; border: none; border-radius: 12px; font-weight: bold; cursor: pointer;">MEYDANA QAYIT</button>
</div>

<div class="live-indicator">
    <div class="status-dot"></div>
    <span>SERVER: <span id="serverLoad">AKTƒ∞V</span></span>
</div>

<header>
    <div style="font-weight: 900; font-size: 0.9rem;">üåê EVERYWHERE FUTBOL</div>
    <div class="user-stats" id="statsBox" onclick="openLevelModal()">
        <span class="rank-name" id="userRank">Y√úKL∆èNƒ∞R...</span>
        <span id="userLevelXP" style="font-size: 0.75rem; font-weight: bold;">LVL 1 ‚Ä¢ 0 XP</span>
    </div>
</header>

<div class="container">
    <div class="section-title" style="font-weight:900; font-size:0.8rem; margin:10px 0;">üóûÔ∏è TRANSFER BOMBALARI (4 SAAT)</div>
    <div id="newsSection"></div>

    <div class="live-match-box" style="background: linear-gradient(135deg, #1e3a8a 0%, #000 100%); color: white; border-radius: 20px; padding: 25px; margin: 20px 0; text-align: center;">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <div>üõ°Ô∏è<br><small>QARABAƒû</small></div>
            <div>
                <div style="font-size:2.2rem; font-weight:900; color:var(--accent);" id="liveScore">0-0</div>
                <div style="background:red; padding:2px 10px; border-radius:15px; font-size:0.7rem;" id="liveMin">12'</div>
            </div>
            <div>ü¶Ö<br><small>NEFT√áƒ∞</small></div>
        </div>
    </div>

    <div class="section-title" style="font-weight:900; font-size:0.8rem; margin-bottom:10px;">üß† G√úNL√úK SUAL</div>
    <div class="card" id="quizBox" style="background:var(--card); border-radius:20px; padding:20px;">
        <div id="quizIn"></div>
    </div>

    <div class="section-title" style="font-weight:900; font-size:0.8rem; margin:20px 0 10px;">ü•Ö PENALTI CHALLENGE</div>
    <div class="card" style="padding:10px; background:var(--card); border-radius:20px;">
        <div class="penalty-arena">
            <div style="position:absolute; top:5px; width:80%; height:80px; border:4px solid white; border-bottom:none;"></div>
            <div class="keeper" id="keeper">üß§</div>
            <div class="ball" id="ball">‚öΩ</div>
        </div>
        <div style="display:flex; gap:10px; margin-top:15px;">
            <button class="kick-btn" onclick="shoot(0)">SOL</button>
            <button class="kick-btn" onclick="shoot(1)">ORTA</button>
            <button class="kick-btn" onclick="shoot(2)">SAƒû</button>
        </div>
        <p id="gameMsg" style="text-align:center; font-weight:bold; margin-top:10px; color:var(--accent); font-size:0.85rem;"></p>
    </div>
</div>

<div class="nav-bar">
    <div class="nav-item" onclick="toggleTheme()" style="font-size:1.5rem; cursor:pointer;">üåì</div>
    <div class="nav-item" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" style="font-size:1.5rem; cursor:pointer;">üè†</div>
    <div class="nav-item" onclick="alert('Tezlikl…ô: Market!')" style="font-size:1.5rem; cursor:pointer;">üè™</div>
</div>

<script>
    let userXP = parseInt(localStorage.getItem('ef_xp')) || 0;
    const interval4h = 4 * 60 * 60 * 1000;

    // R√ºtb…ô Sistemi (B√ºt√ºn s…ôviyy…ôl…ôr v…ô √ß…ôtinlikl…ôr …ôlav…ô edildi)
    const ranks = [
        { lvl: 1, name: "Yax≈üƒ±", xpNeeded: 0 },
        { lvl: 2, name: "Futbol Az…ôrke≈üi", xpNeeded: 150 },
        { lvl: 3, name: "Sadiq Fanat", xpNeeded: 450 },
        { lvl: 4, name: "Taktika Ustasƒ±", xpNeeded: 1000 },
        { lvl: 5, name: "Professional", xpNeeded: 2000 },
        { lvl: 6, name: "Ulduz Oyun√ßu", xpNeeded: 3500 },
        { lvl: 7, name: "Klub R…ôhb…ôri", xpNeeded: 5500 },
        { lvl: 8, name: "Futbol Analitiki", xpNeeded: 8000 },
        { lvl: 9, name: "D√ºnya √áempionu", xpNeeded: 11500 },
        { lvl: 10, name: "EVERYWHERE LEGEND", xpNeeded: 16000 }
    ];

    function calculateLevel() {
        let currentLvl = 1;
        let currentRankName = ranks[0].name;
        for (let i = ranks.length - 1; i >= 0; i--) {
            if (userXP >= ranks[i].xpNeeded) {
                currentLvl = ranks[i].lvl;
                currentRankName = ranks[i].name;
                break;
            }
        }
        return { lvl: currentLvl, name: currentRankName };
    }

    function updateStats(xp) {
        userXP += xp;
        localStorage.setItem('ef_xp', userXP);
        const stats = calculateLevel();
        
        document.getElementById('userRank').innerText = stats.name;
        document.getElementById('userLevelXP').innerText = `LVL ${stats.lvl} ‚Ä¢ ${userXP} XP`;
        
        const box = document.getElementById('statsBox');
        box.classList.add('xp-bump');
        setTimeout(() => box.classList.remove('xp-bump'), 300);

        if(stats.lvl >= 10) box.classList.add('legend-glow');
    }

    function openLevelModal() {
        const list = document.getElementById('rankList');
        list.innerHTML = ranks.map(r => `
            <div style="display:flex; justify-content:space-between; ${userXP >= r.xpNeeded ? 'color:var(--accent); font-weight:bold;' : 'opacity:0.4;'}">
                <span>LVL ${r.lvl} - ${r.name}</span>
                <span>${r.xpNeeded} XP</span>
            </div>
        `).join('');
        document.getElementById('levelModal').classList.add('active');
        document.getElementById('overlay').style.display = 'block';
    }

    function closeLevelModal() {
        document.getElementById('levelModal').classList.remove('active');
        document.getElementById('overlay').style.display = 'none';
    }

    // X…ôb…ôrl…ôr (4 Saat)
    const newsPool = ["Messi-d…ôn ≈üok transfer q…ôrarƒ±!", "Qarabaƒü FK yeni ulduzunu t…ôqdim etdi.", "Avropa Super Liqasƒ± yenid…ôn g√ºnd…ômd…ô!"];
    function handleNews() {
        const now = new Date().getTime();
        const lastNews = localStorage.getItem('lastNewsTime');
        let currentNews = JSON.parse(localStorage.getItem('savedNews'));
        if (!lastNews || (now - lastNews > interval4h)) {
            currentNews = newsPool.sort(() => 0.5 - Math.random()).slice(0, 2);
            localStorage.setItem('savedNews', JSON.stringify(currentNews));
            localStorage.setItem('lastNewsTime', now);
        }
        document.getElementById('newsSection').innerHTML = currentNews.map(n => `
            <div class="news-box">
                <span style="color:#e74c3c; font-size:0.6rem; font-weight:bold;">T∆èCƒ∞Lƒ∞</span>
                <div style="font-weight:bold; font-size:0.85rem;">${n}</div>
            </div>
        `).join('');
    }

    // Quiz
    function handleQuiz() {
        const now = new Date().getTime();
        const lastQ = localStorage.getItem('lastQuizTime');
        const box = document.getElementById('quizIn');
        if (lastQ && (now - lastQ < interval4h)) {
            box.innerHTML = `<div style="text-align:center; color:#e74c3c; font-weight:bold;">Sual √º√ß√ºn 4 saat g√∂zl…ôm…ôlis…ôn! üïí</div>`;
        } else {
            box.innerHTML = `<div><b>D√ºnya √áempionatƒ± 2026 harada ke√ßiril…ôc…ôk?</b></div><br>
                <button onclick="quizAns(true)" class="kick-btn">AB≈û/Kanada</button>
                <button onclick="quizAns(false)" class="kick-btn" style="margin-top:5px;">ƒ∞ngilt…ôr…ô</button>`;
        }
    }

    function quizAns(correct) {
        if(correct) { updateStats(40); alert("D√ºzg√ºn! +40 XP"); }
        localStorage.setItem('lastQuizTime', new Date().getTime());
        handleQuiz();
    }

    // Penalty
    function shoot(p) {
        const today = new Date().toDateString();
        if(localStorage.getItem('lastShot') === today) {
            document.getElementById('gameMsg').innerText = "Bu g√ºnl√ºk ≈üansƒ±n bitdi!";
            return;
        }
        const k = Math.floor(Math.random()*3);
        const offsets = ["-75px", "0px", "75px"];
        document.getElementById('keeper').style.transform = `translateX(${offsets[k]})`;
        document.getElementById('ball').style.transform = `translate(${offsets[p]}, -115px) scale(0.6)`;
        setTimeout(() => {
            if(p === k) { document.getElementById('gameMsg').innerText = "QAPICI TUTDU! üß§"; }
            else { 
                document.getElementById('gameMsg').innerText = "QOOOOL! +50 XP"; 
                updateStats(50);
                document.getElementById('goalAlert').style.transform = "translate(-50%, -50%) scale(1)";
                setTimeout(()=> document.getElementById('goalAlert').style.transform="translate(-50%,-50%) scale(0)", 1500);
            }
            localStorage.setItem('lastShot', today);
        }, 500);
    }

    function toggleTheme() {
        const b = document.getElementById('mainBody');
        b.hasAttribute('data-theme') ? b.removeAttribute('data-theme') : b.setAttribute('data-theme', 'dark');
    }

    setInterval(() => {
        document.getElementById('serverLoad').innerText = Math.floor(Math.random()*100 + 800) + " ON";
    }, 4000);

    window.onload = () => { handleNews(); handleQuiz(); updateStats(0); };
</script>
</body>
</html>

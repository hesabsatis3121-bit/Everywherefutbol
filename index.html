<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Everywhere Futbol - Pro Arena</title>
    <style>
        :root { 
            --bg: #f0f2f5; --header-bg: #1e3a8a; --card: #ffffff; 
            --text: #1e3a8a; --accent: #d4af37; --whatsapp: #25d366;
            --border: #e2e8f0; --table-head: #1e3a8a; --glass: rgba(255,255,255,0.8);
        }

        [data-theme="dark"] {
            --bg: #0b0f19; --header-bg: #161b28; --card: #1f2937; 
            --text: #f8fafc; --border: #374151; --table-head: #111827; --glass: rgba(31,41,55,0.8);
        }

        body { font-family: 'Inter', sans-serif; margin: 0; background: var(--bg); color: var(--text); transition: 0.3; padding-bottom: 100px; overflow-x: hidden; }
        
        header { background: var(--header-bg); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 3px solid var(--accent); position: sticky; top: 0; z-index: 1000; color: white; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
        
        .user-stats { display: flex; align-items: center; gap: 8px; font-size: 0.8rem; background: rgba(255,255,255,0.15); padding: 6px 15px; border-radius: 25px; border: 1px solid var(--accent); transition: 0.3s; }
        .xp-gain-anim { animation: pulse-gold 0.6s ease-in-out; }
        @keyframes pulse-gold { 0% { transform: scale(1); box-shadow: 0 0 0 rgba(212,175,55,0); } 50% { transform: scale(1.1); box-shadow: 0 0 15px var(--accent); } 100% { transform: scale(1); } }

        .container { max-width: 500px; margin: auto; padding: 15px; }

        /* Goal Animasiyasƒ± */
        #goalAlert { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); background: var(--accent); color: #000; padding: 25px 50px; border-radius: 50px; font-size: 2.5rem; font-weight: 900; z-index: 9999; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); pointer-events: none; }

        /* Match Card */
        .live-match-box { background: linear-gradient(135deg, #1e3a8a 0%, #000 100%); color: white; border-radius: 20px; padding: 20px; margin-bottom: 20px; position: relative; overflow: hidden; box-shadow: 0 10px 20px rgba(0,0,0,0.3); }
        .score-display { font-size: 2.2rem; font-weight: 900; letter-spacing: 3px; color: var(--accent); }

        /* Penalty Game */
        .penalty-arena { background: #22c55e; border: 4px solid white; border-radius: 15px; padding: 20px; position: relative; height: 200px; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; overflow: hidden; box-shadow: inset 0 0 50px rgba(0,0,0,0.2); }
        .goal-post { position: absolute; top: 10px; width: 80%; height: 80px; border: 5px solid white; border-bottom: none; }
        .keeper { position: absolute; top: 40px; font-size: 3rem; transition: 0.4s ease-out; z-index: 2; }
        .ball { font-size: 1.5rem; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); z-index: 3; position: absolute; bottom: 20px; }
        .kick-btn-group { display: flex; gap: 10px; width: 100%; margin-top: 15px; }
        .kick-btn { flex: 1; padding: 12px; border-radius: 10px; border: none; background: var(--header-bg); color: white; font-weight: 800; cursor: pointer; }

        /* Quiz Fixes */
        .quiz-option { background: var(--card); padding: 15px; border-radius: 12px; margin-top: 10px; cursor: pointer; border: 2px solid var(--border); transition: 0.2s; font-weight: bold; }
        .quiz-option.correct { background: #22c55e !important; color: white !important; border-color: #16a34a !important; }
        .quiz-option.wrong { background: #ef4444 !important; color: white !important; border-color: #dc2626 !important; }

        .nav-bar { position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%); width: 92%; max-width: 450px; background: var(--glass); backdrop-filter: blur(15px); display: flex; justify-content: space-around; padding: 15px; border-radius: 25px; border: 1px solid var(--border); box-shadow: 0 10px 40px rgba(0,0,0,0.3); z-index: 1000; }
        .section-title { font-weight: 900; color: var(--text); font-size: 0.9rem; margin: 20px 0 10px; display: flex; align-items: center; gap: 10px; }
        .section-title::after { content: ""; flex: 1; height: 1px; background: var(--border); }
    </style>
</head>
<body id="mainBody">

<div id="goalAlert">GOAAAL! ‚öΩ</div>

<header>
    <div style="font-weight: 900; font-size: 1rem; letter-spacing: -0.5px;">üåê EVERYWHERE FUTBOL üåç</div>
    <div class="user-stats" id="statsBox">
        <span id="userLevel">LVL 1</span>
        <span id="userXP">0 XP</span>
    </div>
</header>

<div class="container">
    <div class="live-match-box">
        <div style="display:flex; justify-content:space-between; align-items:center; position:relative; z-index:2">
            <div style="text-align:center; width:35%">üõ°Ô∏è <br> QARABAƒû</div>
            <div style="text-align:center; width:30%">
                <div class="score-display" id="liveScore">0-0</div>
                <div style="background:red; padding:2px 8px; border-radius:10px; font-size:0.7rem;" id="liveMin">12'</div>
            </div>
            <div style="text-align:center; width:35%">ü¶Ö <br> NEFT√áƒ∞</div>
        </div>
    </div>

    <div class="section-title">üß† G√úNL√úK SUAL</div>
    <div class="card" style="background:var(--card); border-radius:15px; padding:20px;">
        <h3 id="qText" style="margin:0 0 15px 0; font-size:1rem;">Y√ºkl…ônir...</h3>
        <div id="qOptions"></div>
    </div>

    <div class="section-title">ü•Ö PENALTY CHALLENGE (H∆èR G√úN)</div>
    <div class="card" style="padding:10px;">
        <div class="penalty-arena" id="arena">
            <div class="goal-post"></div>
            <div class="keeper" id="keeper">üß§</div>
            <div class="ball" id="ball">‚öΩ</div>
        </div>
        <div class="kick-btn-group" id="controls">
            <button class="kick-btn" onclick="shoot(0)">SOL</button>
            <button class="kick-btn" onclick="shoot(1)">ORTA</button>
            <button class="kick-btn" onclick="shoot(2)">SAƒû</button>
        </div>
        <p id="gameMsg" style="text-align:center; font-weight:bold; margin-top:10px; font-size:0.8rem;"></p>
    </div>

    <div class="section-title">üèÜ TURNƒ∞R C∆èDV∆èLƒ∞</div>
    <div class="card" style="padding:0; overflow:hidden;">
        <div style="display:flex; background:var(--header-bg);">
            <button onclick="showLeague('az')" id="btn-az" style="flex:1; padding:12px; border:none; color:white; font-weight:bold; cursor:pointer;">AZ</button>
            <button onclick="showLeague('tr')" id="btn-tr" style="flex:1; padding:12px; border:none; color:white; font-weight:bold; cursor:pointer;">TR</button>
        </div>
        <table style="width:100%; border-collapse:collapse; font-size:0.8rem;">
            <tbody id="table-body"></tbody>
        </table>
    </div>
</div>

<div class="nav-bar">
    <div class="nav-item active" onclick="toggleTheme()">üåì</div>
    <div class="nav-item">üè†</div>
    <div class="nav-item" onclick="alert('Tezlikl…ô: Canlƒ± S√∂hb…ôt!')">üí¨</div>
    <div class="nav-item" onclick="window.scrollTo(0,0)">üîù</div>
</div>

<script>
    // Stats & XP
    let userXP = parseInt(localStorage.getItem('ef_xp')) || 0;
    function updateStats(xp) {
        userXP += xp;
        localStorage.setItem('ef_xp', userXP);
        const box = document.getElementById('statsBox');
        box.classList.add('xp-gain-anim');
        setTimeout(() => box.classList.remove('xp-gain-anim'), 600);
        document.getElementById('userXP').innerText = userXP + " XP";
        document.getElementById('userLevel').innerText = "LVL " + (Math.floor(userXP/100) + 1);
    }

    // Quiz System Fix
    const questions = [
        {q: "Tofiq B…ôhramov hansƒ± finalda q…ôrar verib?", a: ["1966 ƒ∞ngilt…ôr…ô", "1970 Braziliya", "1954 Almaniya"], c: 0},
        {q: "Qarabaƒü FK-nƒ±n l…ôq…ôbi n…ôdir?", a: ["Qartallar", "Atlƒ±lar", "Canavarlar"], c: 1},
        {q: "D√ºnyanƒ±n …ôn √ßox √ßempion olan √∂lk…ôsi?", a: ["Almaniya", "ƒ∞taliya", "Braziliya"], c: 2}
    ];

    function loadQuiz() {
        const q = questions[Math.floor(Math.random()*questions.length)];
        document.getElementById('qText').innerText = q.q;
        const optCont = document.getElementById('qOptions');
        optCont.innerHTML = '';
        q.a.forEach((opt, i) => {
            const div = document.createElement('div');
            div.className = 'quiz-option';
            div.innerText = opt;
            div.onclick = function() {
                if(optCont.getAttribute('data-locked')) return;
                optCont.setAttribute('data-locked', 'true');
                if(i === q.c) {
                    this.classList.add('correct');
                    updateStats(20);
                } else {
                    this.classList.add('wrong');
                    optCont.children[q.c].classList.add('correct');
                }
                setTimeout(() => {
                    optCont.removeAttribute('data-locked');
                    loadQuiz();
                }, 2500);
            };
            optCont.appendChild(div);
        });
    }

    // eFootball Style Penalty Game
    function shoot(playerPos) {
        const lastShot = localStorage.getItem('lastShotDate');
        const today = new Date().toDateString();
        
        if(lastShot === today) {
            document.getElementById('gameMsg').innerText = "G√ºnd…ôlik haqqƒ±n bitdi! Sabah g…ôl. üïí";
            return;
        }

        const keeper = document.getElementById('keeper');
        const ball = document.getElementById('ball');
        const keeperPos = Math.floor(Math.random() * 3); // 0: Left, 1: Center, 2: Right
        
        const positions = ["-80px", "0px", "80px"];
        
        // Move Keeper & Ball
        keeper.style.transform = `translateX(${positions[keeperPos]})`;
        ball.style.transform = `translate(${positions[playerPos]}, -130px) scale(0.6)`;
        
        setTimeout(() => {
            if(playerPos === keeperPos) {
                document.getElementById('gameMsg').innerText = "QAPICI TUTDU! üß§";
            } else {
                document.getElementById('gameMsg').innerText = "QOOOOL! ‚öΩ +50 XP";
                updateStats(50);
                triggerGoal();
            }
            localStorage.setItem('lastShotDate', today);
            setTimeout(resetGame, 2000);
        }, 500);
    }

    function resetGame() {
        document.getElementById('keeper').style.transform = "translateX(0)";
        document.getElementById('ball').style.transform = "translate(0,0) scale(1)";
    }

    function triggerGoal() {
        const ga = document.getElementById('goalAlert');
        ga.style.transform = "translate(-50%, -50%) scale(1)";
        setTimeout(() => ga.style.transform = "translate(-50%, -50%) scale(0)", 1500);
    }

    // Match Sim
    let s1=0, s2=0, min=12;
    setInterval(() => {
        min++; if(min>90) {min=1; s1=0; s2=0;}
        document.getElementById('liveMin').innerText = min+"'";
        if(Math.random()>0.98) {
            Math.random()>0.5 ? s1++ : s2++;
            document.getElementById('liveScore').innerText = s1+"-"+s2;
            triggerGoal();
        }
    }, 4000);

    // League UI
    const leagues = {
        az: [{n: "Qarabaƒü", x: 48}, {n: "Sabah", x: 46}, {n: "Turan", x: 35}],
        tr: [{n: "Galatasaray", x: 63}, {n: "Fenerbah√ße", x: 61}, {n: "Be≈üikta≈ü", x: 47}]
    };
    function showLeague(l) {
        const body = document.getElementById('table-body');
        body.innerHTML = '';
        leagues[l].forEach((t, i) => {
            body.innerHTML += `<tr style="border-bottom:1px solid var(--border)">
                <td style="padding:12px; font-weight:bold">${i+1}</td>
                <td style="padding:12px">${t.n}</td>
                <td style="padding:12px; text-align:right; font-weight:900">${t.x} Xal</td>
            </tr>`;
        });
    }

    function toggleTheme() {
        const b = document.getElementById('mainBody');
        b.hasAttribute('data-theme') ? b.removeAttribute('data-theme') : b.setAttribute('data-theme', 'dark');
    }

    window.onload = () => { showLeague('az'); loadQuiz(); updateStats(0); };
</script>
</body>
</html>
